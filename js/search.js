!function(){var n,e=function(e){return document.querySelector(e)},t=e("#search"),i=e("#search-wrap"),s=e("#key"),r=e("#back"),a=e("#search-panel"),o=e("#search-result"),c=e("#search-tpl").innerHTML;var u=document[-1!==navigator.userAgent.indexOf("Firefox")?"documentElement":"body"],l=function(){window.innerWidth<760&&u.classList.add("lock-size"),a.classList.add("in")},d=function(){window.innerWidth<760&&u.classList.remove("lock-size"),a.classList.remove("in")};function f(e,t){return t.lastIndex=0,t.test(e)}function p(e){var t=this.value.trim();if(t){var s=new RegExp(t.replace(/[ ]/g,"|"),"gmi");!function(t){if(n)t(n);else{var e=new XMLHttpRequest;e.open("GET","/blog/content.json",!0),e.onload=function(){if(200<=this.status&&this.status<300){var e=JSON.parse(this.response);n=e instanceof Array?e:e.posts,t(n)}else console.error(this.statusText)},e.onerror=function(){console.error(this.statusText)},e.send()}}(function(e){var t,n,i=e.filter(function(e){return n=s,f((t=e).title,n)||t.tags.some(function(e){return f(e.name,n)})||f(t.text,n);var t,n});n="",n=(t=i).length?t.map(function(e){return t=c,n={title:e.title,path:"blog/"+e.path,date:new Date(e.date).toLocaleDateString(),tags:e.tags.map(function(e){return"<span>#"+e.name+"</span>"}).join("")},t.replace(/\{\w+\}/g,function(e){var t=e.replace(/\{|\}/g,"");return n[t]||""});var t,n}).join(""):'<li class="tips"><i class="icon icon-coffee icon-3x"></i><p>Results not found!</p></li>',o.innerHTML=n,l()}),e.preventDefault()}else d()}t.addEventListener("click",function(){i.classList.toggle("in"),i.querySelector(".search-input").focus(),s.value=""}),r.addEventListener("click",function(){i.classList.remove("in"),d()}),document.addEventListener("click",function(e){"key"!==e.target.id&&d()}),s.addEventListener("input",p),s.addEventListener("click",p)}();